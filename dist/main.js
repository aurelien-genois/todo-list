(()=>{"use strict";const e=(e,t,s,a)=>{const r={getTitle:()=>e,setTitle:t=>e=t,getDueDate:()=>t,setDueDate:e=>t=e,getDesc:()=>a,setDesc:e=>a=e,taskPriorities:["High","Medium","Low"],getPriority(){return this.taskPriorities[s-1]},setPriority(e){s=e},taskStates:["Done","WIP","Todo","Abandoned"],getState(){return this.taskStates[this.stateDegree-1]},setState(e){this.stateDegree=e}};return Object.assign(Object.create(r),{stateDegree:3})},t=(e=>{const t=e.querySelector("#new-task-btn"),s=e.querySelector("#tasks-list"),r=t=>{const a=t.map((t=>{const s=e.createElement("li");return s.classList.add("tasks"),s.textContent=t.getTitle(),s}));for(;s.firstChild;)s.removeChild(s.firstChild);a.map((e=>{s.appendChild(e)}))},i=e=>{let s=a.getAllTasks(),i=[];switch(e.target.dataset.tab){case"today":i=s.filter((e=>1===e.getDueDate()));break;case"this-week":i=s.filter((e=>e.getDueDate()>0));break;case"high-priority":i=s.filter((e=>"High"===e.getPriority()));break;case"all-tasks":i=[...s]}o.textContent=e.target.textContent,c.removeAttribute("data-project-id"),t.style.visibility="hidden",p.style.visibility="hidden",r(i)},n=e.querySelector("#projects-tabs"),c=e.querySelector("#project-detail"),o=e.querySelector("#project-title"),d=e.querySelector("#project-desc"),p=e.querySelector("#edit-project-btn"),l=(e,s)=>{r(e.getTasks()),o.textContent=e.getTitle(),d.textContent=e.getDesc(),c.setAttribute("data-project-id",s),t.style.visibility="visible",p.style.visibility="visible"};return p.addEventListener("click",(()=>{})),[...e.querySelector("#general-tabs").children].map((e=>e.addEventListener("click",i.bind(void 0)))),{appendProjectsTabs:t=>{const s=t.map((t=>{const s=e.createElement("li");return s.classList.add("tabs","project-tab"),s.textContent=t.getTitle(),s}));for(s.map(((e,s)=>e.addEventListener("click",l.bind(void 0,t[s],s))));n.firstChild;)n.removeChild(n.firstChild);s.map((e=>{n.appendChild(e)}))},appendTasks:r,initPageLoadTasks:()=>{let e=a.getAllTasks();r(e)},updateProjectDetail:l}})(document),s=((e=>{const s=(t,s,a,r)=>{const i=e.createElement("label");switch(i.classList.add("popup-labels"),i.setAttribute("for",s),a){case"text":i.textContent=t;const a=e.createElement("input");a.setAttribute("type","text"),a.setAttribute("maxlength",25),a.setAttribute("name",s),a.setAttribute("id",s),a.classList.add("popup-inputs","popup-inputs-text"),a.setAttribute("required",!0),i.appendChild(a);break;case"date":i.textContent=t;const n=e.createElement("input");n.setAttribute("type","date"),n.setAttribute("name",s),n.setAttribute("id",s),n.classList.add("popup-inputs","popup-inputs-date"),n.setAttribute("required",!0),i.appendChild(n);break;case"textarea":i.classList.add("popup-labels-textarea");const c=e.createElement("span");c.textContent=t;const o=e.createElement("span");o.classList.add("parenthesis"),o.textContent=" (up to 100 characters)",c.appendChild(o);const d=e.createElement("textarea");d.setAttribute("maxlength",100),d.setAttribute("name",s),d.setAttribute("id",s),d.classList.add("popup-inputs","popup-textarea"),i.append(c,d);break;case"fieldset":i.textContent=t;const p=e.createElement("fieldset");p.setAttribute("id",s),p.classList.add("popup-inputs"),r.map((e=>{e.firstElementChild.setAttribute("name",s),p.appendChild(e)})),i.appendChild(p);break;case"radio":i.classList.remove("popup-labels");const l={Low:3,Medium:2,High:1},u=e.createElement("input");u.setAttribute("type","radio"),u.setAttribute("id",s),u.classList.add("popup-inputs-radio"),u.setAttribute("value",l[t]),i.appendChild(u),i.append(t)}return i},r=(t,s,a)=>{const r=e.createElement("form");r.setAttribute("id",t),r.classList.add("popup-forms"),a.map((e=>{r.appendChild(e)}));const i=e.createElement("input");return i.setAttribute("type","submit"),i.classList.add("popup-submits"),i.setAttribute("value",s),r.appendChild(i),r},i=(t,s,a,r)=>{const i=e.createElement("section");i.setAttribute("id",t),i.classList.add("popups");const n=e.createElement("div");n.classList.add("popup-containers"),i.appendChild(n);const c=e.createElement("h3");c.textContent=s,c.classList.add("popup-titles");const o=e.createElement("button");return o.textContent="X",o.setAttribute("id",a),o.classList.add("popup-close-btns"),n.append(c,o,r),i},n=e.querySelector("#body"),c=e=>{n.appendChild(e),e.style.opacity=0,setTimeout((()=>{e.style.opacity=1}),500)},o=e=>{e.style.opacity=0,setTimeout((()=>{n.removeChild(e)}),500)};e.querySelector("#new-project-btn").addEventListener("click",c.bind(void 0,(()=>{let e=[];const n=s("Project title:","new-project-title","text"),c=s("Project description:","new-project-desc","textarea");e.push(n,c);const d=r("new-project-form","Create a new project",e);d.addEventListener("submit",(e=>{const s=new FormData(d);for(const e of s)switch(e[0]){case"new-project-title":var r=e[1];break;case"new-project-desc":var i=e[1]}d.reset(),a.createProject(r,i);const n=a.getProjectByTitle(r);let c=0;a.getProjects().map(((e,t)=>{e.getTitle()===r&&(c=t)})),t.updateProjectDetail(n,c),e.preventDefault(),o(p)}));const p=i("new-project-popup","New project","new-project-close-btn",d);return p.querySelector("#new-project-close-btn").addEventListener("click",o.bind(void 0,p)),p})()));const d=()=>{let t=[];const n=s("Task title:","new-task-title","text"),c=s("Due date:","new-task-duedate","date");let p=[];const l=s("Low","new-task-priority3","radio"),u=s("Medium","new-task-priority2","radio"),b=s("High","new-task-priority1","radio");p.push(l,u,b);const k=s("Priority:","new-task-priority","fieldset",p),T=s("Task description:","new-task-desc","textarea");t.push(n,c,k,T);const j=r("new-task-form","Create a new task",t);j.addEventListener("submit",(t=>{const s=new FormData(j);for(const e of s)switch(e[0]){case"new-task-title":var r=e[1];break;case"new-task-duedate":var i=e[1];break;case"new-task-priority":var n=e[1];break;case"new-task-desc":var c=e[1]}j.reset();const d=e.querySelector("#project-detail").dataset.projectId;a.getProject(d).createTask(r,i,n||3,c),t.preventDefault(),o(g)}));const g=i("new-task-popup","New task","new-task-close-btn",j);return g.querySelector("#new-task-close-btn").addEventListener("click",o.bind(void 0,d)),g};e.querySelector("#new-task-btn").addEventListener("click",c.bind(void 0,d()))})(document),(s,a)=>{let r=[];const i={getTitle:()=>s,setTitle:e=>s=e,getDesc:()=>a,setDesc:e=>a=e,getTasks(){return this.tasks},getTask(e){return this.tasks[e]},createTask(s,a,r,i){this.tasks.push(e(s,a,r,i)),t.appendTasks(this.tasks)},deleteTask(e){const s=r.indexOf(e);r.splice(s,1),t.appendTasks(this.tasks)}};return Object.assign(Object.create(i),{tasks:r})}),a=(()=>{let e=[];return{createProject:(a,r)=>{const i=s(a,r);return e.push(i),t.appendProjectsTabs(e),i},deleteProject:s=>{const a=e.indexOf(s);return e.splice(a,1),t.appendProjectsTabs(e),s},getProjects:()=>e,getProject:t=>e[t],getAllTasks:()=>e.reduce(((e,t)=>e.concat(t.getTasks())),[]),getProjectByTitle:t=>e.find((e=>e.getTitle()===t)),getProjectIdByTitle:t=>{e.map(((e,s)=>{if(e.getTitle()===t)return s}))}}})();a.createProject("One Project","One Proj Desc"),a.getProjects()[0].createTask("1 One Task TODAY THIS WEEK HIGH",1,1,"desc"),a.getProjects()[0].createTask("1 Two Task HIGH",-1,"desc",1),a.getProjects()[0].createTask("1 Three Task TODAY THIS WEEK",1,2,"desc"),a.createProject("Two Project","Two Proj Desc"),a.getProjects()[1].createTask("2 One Task THIS WEEK HIGH",2,1,"desc"),a.createProject("Three Project","Three Proj Desc"),a.getProjects()[2].createTask("3 One Task TODAY THIS WEEK ",1,3,"desc"),a.getProjects()[2].createTask("3 Two Task HIGH",-1,1,"desc"),console.log(a.getProjects()),t.initPageLoadTasks()})();