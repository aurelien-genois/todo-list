(()=>{"use strict";const e=(e,t,s=3,r="")=>{const a={getTitle:()=>e,setTitle:t=>e=t,getDueDate:()=>t,setDueDate:e=>t=e,getDesc:()=>r,setDesc:e=>r=e,taskPriorities:["High","Medium","Low"],getPriority(){return this.taskPriorities[s-1]},setPriority(e){s=e},taskStates:["Done","WIP","Todo","Abandoned"],getState(){return this.taskStates[this.stateDegree-1]},setState(e){this.stateDegree=e}};return Object.assign(Object.create(a),{stateDegree:3})},t=(e=>{const t=e.querySelector("#projects-tabs"),s=e.querySelector("#new-task-btn");s.style.visibility="hidden";const a=e.querySelector("#tasks-list"),c=e.querySelector("#project-title"),i=e.querySelector("#project-detail"),o=[...e.querySelector("#general-tabs").children],n=t=>{const s=t.map((t=>{const s=e.createElement("li");return s.classList.add("tasks"),s.textContent=t.getTitle(),s}));for(;a.firstChild;)a.removeChild(a.firstChild);s.map((e=>{a.appendChild(e)}))},l=e=>{let t=r.getProjects().reduce(((e,t)=>e.concat(t.getTasks())),[]),a=[];switch(e.target.dataset.tab){case"today":a=t.filter((e=>1===e.getDueDate()));break;case"this-week":a=t.filter((e=>e.getDueDate()>0));break;case"high-priority":a=t.filter((e=>"High"===e.getPriority()));break;case"all-tasks":a=[...t]}c.textContent=e.target.textContent,i.removeAttribute("data-project-id"),s.style.visibility="hidden",n(a)};o.map((e=>e.addEventListener("click",l.bind(void 0))));const d=(e,t)=>{n(e.getTasks()),c.textContent=e.getTitle(),i.setAttribute("data-project-id",t),s.style.visibility="visible"};return{appendProjectsTabs:s=>{const r=s.map((t=>{const s=e.createElement("li");return s.classList.add("tabs","project-tab"),s.textContent=t.getTitle(),s}));for(r.map(((e,t)=>e.addEventListener("click",d.bind(void 0,s[t],t))));t.firstChild;)t.removeChild(t.firstChild);r.map((e=>{t.appendChild(e)}))},appendTasks:n,initPageLoadTasks:()=>{let e=r.getProjects().reduce(((e,t)=>e.concat(t.getTasks())),[]);n(e)}}})(document),s=((e=>{const t=e.querySelector("#new-project-btn"),s=e.querySelector("#new-project-popup"),a=e.querySelector("#new-project-close-btn"),c=e.querySelector("#new-task-btn"),i=e.querySelector("#new-task-popup"),o=e.querySelector("#new-task-close-btn"),n=e.querySelector("#new-task-form"),l=e.querySelector("#new-project-form"),d=e=>{e.style.opacity=1,e.style.visibility="visible"},u=e=>{e.style.opacity=0,setTimeout((()=>{e.style.visibility="hidden"}),500)};t.addEventListener("click",d.bind(void 0,s)),a.addEventListener("click",u.bind(void 0,s)),l.addEventListener("submit",(e=>{e.preventDefault();const t=l.querySelector("#new-project-title"),a=l.querySelector("#new-project-desc"),c=t.value,i=a.value;t.value="",a.value="",r.createProject(c,i),u(s)})),c.addEventListener("click",d.bind(void 0,i)),o.addEventListener("click",u.bind(void 0,i)),n.addEventListener("submit",(t=>{t.preventDefault();const s=n.querySelector("#new-task-title"),a=n.querySelector("#new-task-duedate"),c=[...n.querySelector("#new-task-priority").querySelectorAll("input[type='radio'")].find((e=>e.checked)),o=n.querySelector("#new-task-desc"),l=s.value,d=a.value,k=void 0!==c?c.value:3,p=o.value;s.value="",a.value="",void 0!==c&&(c.checked=!1),o.value="";const T=e.querySelector("#project-detail").dataset.projectId;r.getProject(T).createTask(l,d,k,p),u(i)}))})(document),(s,r="")=>{let a=[];const c={getTitle:()=>s,setTitle:e=>s=e,getDesc:()=>r,setDesc:e=>r=e,getTasks(){return this.tasks},getTask(e){return this.tasks[e]},createTask(s,r,a,c){this.tasks.push(e(s,r,a,c)),t.appendTasks(this.tasks)},deleteTask(e){const s=a.indexOf(e);a.splice(s,1),t.appendTasks(this.tasks)}};return Object.assign(Object.create(c),{tasks:a})}),r=(()=>{let e=[];return{createProject:(a,c)=>{const i=s(a,c);return e.push(i),t.appendProjectsTabs(r.getProjects()),i},deleteProject:s=>(e.indexOf(s),e.splice(s,1),t.appendProjectsTabs(r.getProjects()),s),getProjects:()=>e,getProject:t=>e[t]}})();r.createProject("One Project","One Proj Desc"),r.getProjects()[0].createTask("1 One Task TODAY THIS WEEK HIGH",1,1,"desc"),r.getProjects()[0].createTask("1 Two Task HIGH",-1,"desc",1),r.getProjects()[0].createTask("1 Three Task TODAY THIS WEEK",1,2,"desc"),r.createProject("Two Project","Two Proj Desc"),r.getProjects()[1].createTask("2 One Task THIS WEEK HIGH",2,1,"desc"),r.createProject("Three Project","Three Proj Desc"),r.getProjects()[2].createTask("3 One Task TODAY THIS WEEK ",1,3,"desc"),r.getProjects()[2].createTask("3 Two Task HIGH",-1,1,"desc"),console.log(r.getProjects()),t.initPageLoadTasks()})();