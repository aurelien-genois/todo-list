(()=>{"use strict";const e=(e,t,s,a)=>{const r={getTitle:()=>e,setTitle:t=>e=t,getDueDate:()=>t,setDueDate:e=>t=e,getDesc:()=>a,setDesc:e=>a=e,taskPriorities:["High","Medium","Low"],getPriority(){return this.taskPriorities[s-1]},setPriority(e){s=e},taskStates:["Done","WIP","Todo","Abandoned"],getState(){return this.taskStates[this.stateDegree-1]},setState(e){this.stateDegree=e}};return Object.assign(Object.create(r),{stateDegree:3})},t=(e=>{const t=e.querySelector("#tasks-list"),s=s=>{const a=s.map((t=>((t,s,a,r,n)=>{const c=e.createElement("li");c.classList.add("tasks");const i=e.createElement("h3");i.textContent=t,i.classList.add("task-title");const o=e.createElement("div");o.classList.add("task-infos");const d=e.createElement("p");d.classList.add("task-duedate"),d.textContent=s;const p=e.createElement("p");p.classList.add("task-state"),p.textContent=r;const l=e.createElement("button");l.classList.add("task-expand-btn"),l.textContent="V",o.append(d,p,l),l.addEventListener("click",(()=>{c.querySelector(".task-expand")?(c.removeChild(k),l.textContent="V"):(c.append(k),l.textContent="A")}));const u=e.createElement("div");u.classList.add("task-main-infos"),u.append(i,o);const k=e.createElement("div");k.classList.add("task-expand");const b=e.createElement("div");b.classList.add("task-details");const m=e.createElement("p");m.classList.add("task-priority"),m.textContent=a;const T=e.createElement("p");T.classList.add("task-desc"),T.textContent=n,b.append(m,T);const g=e.createElement("div");g.classList.add("task-actions");const h=e.createElement("button");h.classList.add("edit-task-btn","round-btn"),h.textContent="/",h.addEventListener("click",(()=>{}));const j=e.createElement("button");return j.classList.add("round-btn","delete-task-btn"),j.textContent="X",j.addEventListener("click",(()=>{})),g.append(h,j),k.append(b,g),c.append(u),c})(t.getTitle(),t.getDueDate(),t.getPriority(),t.getState(),t.getDesc())));for(;t.firstChild;)t.removeChild(t.firstChild);a.map((e=>{t.appendChild(e)}))},r=e=>{let t=a.getAllTasks(),r=[];switch(e.target.dataset.tab){case"today":r=t.filter((e=>1===e.getDueDate()));break;case"this-week":r=t.filter((e=>e.getDueDate()>0));break;case"high-priority":r=t.filter((e=>"High"===e.getPriority()));break;case"all-tasks":r=[...t]}i.textContent=e.target.textContent,o.textContent="",c.removeAttribute("data-project-id"),d.style.visibility="hidden",p.style.visibility="hidden",s(r)},n=e.querySelector("#projects-tabs"),c=e.querySelector("#project-detail"),i=e.querySelector("#project-title"),o=e.querySelector("#project-desc"),d=e.querySelector("#new-task-btn"),p=e.querySelector("#edit-project-btn"),l=(e,t)=>{s(e.getTasks()),i.textContent=e.getTitle(),o.textContent=e.getDesc(),c.setAttribute("data-project-id",t),d.style.visibility="visible",p.style.visibility="visible"};return p.addEventListener("click",(()=>{})),[...e.querySelector("#general-tabs").children].map((e=>e.addEventListener("click",r.bind(void 0)))),{renderProjectsTabs:t=>{const s=t.map((t=>{const s=e.createElement("li");return s.classList.add("tabs","project-tab"),s.textContent=t.getTitle(),s}));for(s.map(((e,s)=>e.addEventListener("click",l.bind(void 0,t[s],s))));n.firstChild;)n.removeChild(n.firstChild);s.map((e=>{n.appendChild(e)}))},renderTasks:s,initPageLoadTasks:()=>{let e=a.getAllTasks();s(e)},renderProjectsDetails:l}})(document),s=(s,a)=>{let r=[];const n={getTitle:()=>s,setTitle:e=>s=e,getDesc:()=>a,setDesc:e=>a=e,getTasks(){return this.tasks},getTask(e){return this.tasks[e]},createTask(s,a,r,n){this.tasks.push(e(s,a,r,n)),t.renderTasks(this.tasks)},deleteTask(e){const s=r.indexOf(e);r.splice(s,1),t.renderTasks(this.tasks)}};return Object.assign(Object.create(n),{tasks:r})},a=(()=>{let e=[];return{createProject:(a,r)=>{const n=s(a,r);return e.push(n),t.renderProjectsTabs(e),n},deleteProject:s=>{const a=e.indexOf(s);return e.splice(a,1),t.renderProjectsTabs(e),s},getProjects:()=>e,getProject:t=>e[t],getAllTasks:()=>e.reduce(((e,t)=>e.concat(t.getTasks())),[]),getProjectByTitle:t=>e.find((e=>e.getTitle()===t)),getProjectIdByTitle:t=>{e.map(((e,s)=>{if(e.getTitle()===t)return s}))}}})();a.createProject("One Project","One Proj Desc"),a.getProjects()[0].createTask("1 One Task TODAY THIS WEEK HIGH",1,1,"desc"),a.getProjects()[0].createTask("1 Two Task HIGH",-1,"desc",1),a.getProjects()[0].createTask("1 Three Task TODAY THIS WEEK",1,2,"desc"),a.createProject("Two Project","Two Proj Desc"),a.getProjects()[1].createTask("2 One Task THIS WEEK HIGH",2,1,"desc"),a.createProject("Three Project","Three Proj Desc"),a.getProjects()[2].createTask("3 One Task TODAY THIS WEEK ",1,3,"desc"),a.getProjects()[2].createTask("3 Two Task HIGH",-1,1,"desc");const r=(e=>{const t=e.querySelector("#body");return{createFormInput:(t,s,a,r)=>{const n=e.createElement("label");switch(n.classList.add("popup-labels"),n.setAttribute("for",s),a){case"text":n.textContent=t;const a=e.createElement("input");a.setAttribute("type","text"),a.setAttribute("maxlength",25),a.setAttribute("name",s),a.setAttribute("id",s),a.classList.add("popup-inputs","popup-inputs-text"),a.setAttribute("required",!0),n.appendChild(a);break;case"date":n.textContent=t;const c=e.createElement("input");c.setAttribute("type","date"),c.setAttribute("name",s),c.setAttribute("id",s),c.classList.add("popup-inputs","popup-inputs-date"),c.setAttribute("required",!0),n.appendChild(c);break;case"textarea":n.classList.add("popup-labels-textarea");const i=e.createElement("span");i.textContent=t;const o=e.createElement("span");o.classList.add("parenthesis"),o.textContent=" (up to 100 characters)",i.appendChild(o);const d=e.createElement("textarea");d.setAttribute("maxlength",100),d.setAttribute("name",s),d.setAttribute("id",s),d.classList.add("popup-inputs","popup-textarea"),n.append(i,d);break;case"fieldset":n.textContent=t;const p=e.createElement("fieldset");p.setAttribute("id",s),p.classList.add("popup-inputs"),r.map((e=>{e.firstElementChild.setAttribute("name",s),p.appendChild(e)})),n.appendChild(p);break;case"radio":n.classList.remove("popup-labels");const l={Low:3,Medium:2,High:1},u=e.createElement("input");u.setAttribute("type","radio"),u.setAttribute("id",s),u.classList.add("popup-inputs-radio"),u.setAttribute("value",l[t]),n.appendChild(u),n.append(t)}return n},createForm:(t,s,a)=>{const r=e.createElement("form");r.setAttribute("id",t),r.classList.add("popup-forms"),a.map((e=>{r.appendChild(e)}));const n=e.createElement("input");return n.setAttribute("type","submit"),n.classList.add("popup-submits"),n.setAttribute("value",s),r.appendChild(n),r},createPopup:(t,s,a,r)=>{const n=e.createElement("section");n.setAttribute("id",t),n.classList.add("popups");const c=e.createElement("div");c.classList.add("popup-containers"),n.appendChild(c);const i=e.createElement("h3");i.textContent=s,i.classList.add("popup-titles");const o=e.createElement("button");return o.textContent="X",o.setAttribute("id",a),o.classList.add("popup-close-btns"),c.append(i,o,r),n},openPopup:e=>{t.appendChild(e),e.style.opacity=0,setTimeout((()=>{e.style.opacity=1}),500)},closePopup:e=>{e.style.opacity=0,setTimeout((()=>{t.removeChild(e)}),500)}}})(document);document.querySelector("#new-project-btn").addEventListener("click",r.openPopup.bind(void 0,(()=>{let e=[];const s=r.createFormInput("Project title:","new-project-title","text"),n=r.createFormInput("Project description:","new-project-desc","textarea");e.push(s,n);const c=r.createForm("new-project-form","Create a new project",e);c.addEventListener("submit",(e=>{const s=new FormData(c);for(const e of s)switch(e[0]){case"new-project-title":var n=e[1];break;case"new-project-desc":var o=e[1]}c.reset(),a.createProject(n,o);const d=a.getProjectByTitle(n);let p=0;a.getProjects().map(((e,t)=>{e.getTitle()===n&&(p=t)})),t.renderProjectsDetails(d,p),e.preventDefault(),r.closePopup(i)}));const i=r.createPopup("new-project-popup","New project","new-project-close-btn",c);return i.querySelector("#new-project-close-btn").addEventListener("click",r.closePopup.bind(void 0,i)),i})()));const n=()=>{let e=[];const t=r.createFormInput("Task title:","new-task-title","text"),s=r.createFormInput("Due date:","new-task-duedate","date");let c=[];const i=r.createFormInput("Low","new-task-priority3","radio"),o=r.createFormInput("Medium","new-task-priority2","radio"),d=r.createFormInput("High","new-task-priority1","radio");c.push(i,o,d);const p=r.createFormInput("Priority:","new-task-priority","fieldset",c),l=r.createFormInput("Task description:","new-task-desc","textarea");e.push(t,s,p,l);const u=r.createForm("new-task-form","Create a new task",e);u.addEventListener("submit",(e=>{const t=new FormData(u);for(const e of t)switch(e[0]){case"new-task-title":var s=e[1];break;case"new-task-duedate":var n=e[1];break;case"new-task-priority":var c=e[1];break;case"new-task-desc":var i=e[1]}u.reset();const o=document.querySelector("#project-detail").dataset.projectId;a.getProject(o).createTask(s,n,c||3,i),e.preventDefault(),r.closePopup(k)}));const k=r.createPopup("new-task-popup","New task","new-task-close-btn",u);return k.querySelector("#new-task-close-btn").addEventListener("click",r.closePopup.bind(void 0,n)),k};document.querySelector("#new-task-btn").addEventListener("click",r.openPopup.bind(void 0,n())),console.log(a.getProjects()),t.initPageLoadTasks()})();