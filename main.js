(()=>{"use strict";const e=(e,t,s,r)=>{const a={getTitle:()=>e,setTitle:t=>e=t,getDueDate:()=>t,setDueDate:e=>t=e,getDesc:()=>r,setDesc:e=>r=e,taskPriorities:["High","Medium","Low"],getPriority(){return this.taskPriorities[s-1]},setPriority(e){s=e},taskStates:["Done","WIP","Todo","Abandoned"],getState(){return this.taskStates[this.stateDegree-1]},setState(e){this.stateDegree=e}};return Object.assign(Object.create(a),{stateDegree:3})},t=(e=>{const t=e.querySelector("#projects-tabs"),s=e.querySelector("#new-task-btn");s.style.visibility="hidden";const a=e.querySelector("#tasks-list"),c=e.querySelector("#project-title"),i=e.querySelector("#project-detail"),o=[...e.querySelector("#general-tabs").children],n=t=>{const s=t.map((t=>{const s=e.createElement("li");return s.classList.add("tasks"),s.textContent=t.getTitle(),s}));for(;a.firstChild;)a.removeChild(a.firstChild);s.map((e=>{a.appendChild(e)}))},l=e=>{let t=r.getAllTasks(),a=[];switch(e.target.dataset.tab){case"today":a=t.filter((e=>1===e.getDueDate()));break;case"this-week":a=t.filter((e=>e.getDueDate()>0));break;case"high-priority":a=t.filter((e=>"High"===e.getPriority()));break;case"all-tasks":a=[...t]}c.textContent=e.target.textContent,i.removeAttribute("data-project-id"),s.style.visibility="hidden",n(a)};o.map((e=>e.addEventListener("click",l.bind(void 0))));const d=(e,t)=>{n(e.getTasks()),c.textContent=e.getTitle(),i.setAttribute("data-project-id",t),s.style.visibility="visible"};return{appendProjectsTabs:s=>{const r=s.map((t=>{const s=e.createElement("li");return s.classList.add("tabs","project-tab"),s.textContent=t.getTitle(),s}));for(r.map(((e,t)=>e.addEventListener("click",d.bind(void 0,s[t],t))));t.firstChild;)t.removeChild(t.firstChild);r.map((e=>{t.appendChild(e)}))},appendTasks:n,initPageLoadTasks:()=>{let e=r.getAllTasks();n(e)}}})(document),s=((e=>{const t=e.querySelector("#new-project-btn"),s=e.querySelector("#new-project-popup"),a=e.querySelector("#new-project-close-btn"),c=e.querySelector("#new-project-form"),i=e.querySelector("#new-task-btn"),o=e.querySelector("#new-task-popup"),n=e.querySelector("#new-task-close-btn"),l=e.querySelector("#new-task-form"),d=e=>{e.style.opacity=1,e.style.visibility="visible"},k=e=>{e.style.opacity=0,setTimeout((()=>{e.style.visibility="hidden"}),500)};t.addEventListener("click",d.bind(void 0,s)),a.addEventListener("click",k.bind(void 0,s)),c.addEventListener("submit",(e=>{const t=new FormData(c);for(const e of t)switch(e[0]){case"new-project-title":var a=e[1];break;case"new-project-desc":var i=e[1]}c.reset(),r.createProject(a,i),e.preventDefault(),k(s)})),i.addEventListener("click",d.bind(void 0,o)),n.addEventListener("click",k.bind(void 0,o)),l.addEventListener("submit",(t=>{const s=new FormData(l);for(const e of s)switch(e[0]){case"new-task-title":var a=e[1];break;case"new-task-duedate":var c=e[1];break;case"new-task-priority":var i=e[1];break;case"new-task-desc":var n=e[1]}l.reset();const d=e.querySelector("#project-detail").dataset.projectId;r.getProject(d).createTask(a,c,i||3,n),t.preventDefault(),k(o)}))})(document),(s,r)=>{let a=[];const c={getTitle:()=>s,setTitle:e=>s=e,getDesc:()=>r,setDesc:e=>r=e,getTasks(){return this.tasks},getTask(e){return this.tasks[e]},createTask(s,r,a,c){this.tasks.push(e(s,r,a,c)),t.appendTasks(this.tasks)},deleteTask(e){const s=a.indexOf(e);a.splice(s,1),t.appendTasks(this.tasks)}};return Object.assign(Object.create(c),{tasks:a})}),r=(()=>{let e=[];return{createProject:(r,a)=>{const c=s(r,a);return e.push(c),t.appendProjectsTabs(e),c},deleteProject:s=>{const r=e.indexOf(s);return e.splice(r,1),t.appendProjectsTabs(e),s},getProjects:()=>e,getProject:t=>e[t],getAllTasks:()=>e.reduce(((e,t)=>e.concat(t.getTasks())),[])}})();r.createProject("One Project","One Proj Desc"),r.getProjects()[0].createTask("1 One Task TODAY THIS WEEK HIGH",1,1,"desc"),r.getProjects()[0].createTask("1 Two Task HIGH",-1,"desc",1),r.getProjects()[0].createTask("1 Three Task TODAY THIS WEEK",1,2,"desc"),r.createProject("Two Project","Two Proj Desc"),r.getProjects()[1].createTask("2 One Task THIS WEEK HIGH",2,1,"desc"),r.createProject("Three Project","Three Proj Desc"),r.getProjects()[2].createTask("3 One Task TODAY THIS WEEK ",1,3,"desc"),r.getProjects()[2].createTask("3 Two Task HIGH",-1,1,"desc"),console.log(r.getProjects()),t.initPageLoadTasks()})();